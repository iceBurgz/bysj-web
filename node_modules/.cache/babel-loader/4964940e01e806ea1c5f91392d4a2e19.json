{"remainingRequest":"/Users/mohan/Documents/MyProject/bysj-web/node_modules/babel-loader/lib/index.js!/Users/mohan/Documents/MyProject/bysj-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/mohan/Documents/MyProject/bysj-web/src/api/index.js","dependencies":[{"path":"/Users/mohan/Documents/MyProject/bysj-web/src/api/index.js","mtime":1554202776000},{"path":"/Users/mohan/Documents/MyProject/bysj-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mohan/Documents/MyProject/bysj-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mohan/Documents/MyProject/bysj-web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/mohan/Documents/MyProject/bysj-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Promise from \"/Users/mohan/Documents/MyProject/bysj-web/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport Axios from 'axios';\nimport router from '../router';\nimport login from './modules/login';\n\nif (window.sessionStorage.getItem('token')) {\n  Axios.defaults.headers.common['Authorization'] = window.sessionStorage.getItem('token');\n}\n\nexport var axiosInstance = Axios.create({\n  baseURL: 'http://localhost: 7001'\n}); // response 拦截器\n\naxiosInstance.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (error.response) {\n    switch (error.response.status) {\n      case 401:\n        router.replace({\n          path: 'login',\n          // 将跳转的路由path作为参数，登录成功后跳转到该路由\n          query: {\n            redirect: router.currentRoute.fullPath\n          }\n        });\n    }\n  }\n\n  return _Promise.reject(error.response);\n});\nexport default _objectSpread({}, login);",{"version":3,"sources":["/Users/mohan/Documents/MyProject/bysj-web/src/api/index.js"],"names":["Axios","router","login","window","sessionStorage","getItem","defaults","headers","common","axiosInstance","create","baseURL","interceptors","response","use","error","status","replace","path","query","redirect","currentRoute","fullPath","reject"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,OAAOC,KAAP,MAAkB,iBAAlB;;AAEA,IAAIC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,OAA9B,CAAJ,EAA4C;AAC1CL,EAAAA,KAAK,CAACM,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiDL,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,OAA9B,CAAjD;AACD;;AAED,OAAO,IAAII,aAAa,GAAGT,KAAK,CAACU,MAAN,CAAa;AACtCC,EAAAA,OAAO,EAAE;AAD6B,CAAb,CAApB,C,CAIP;;AACAF,aAAa,CAACG,YAAd,CAA2BC,QAA3B,CAAoCC,GAApC,CACE,UAAAD,QAAQ,EAAI;AACV,SAAOA,QAAP;AACD,CAHH,EAIE,UAAAE,KAAK,EAAI;AACP,MAAIA,KAAK,CAACF,QAAV,EAAoB;AAClB,YAAQE,KAAK,CAACF,QAAN,CAAeG,MAAvB;AACE,WAAK,GAAL;AACEf,QAAAA,MAAM,CAACgB,OAAP,CAAe;AACbC,UAAAA,IAAI,EAAE,OADO;AAEb;AACAC,UAAAA,KAAK,EAAE;AAAEC,YAAAA,QAAQ,EAAEnB,MAAM,CAACoB,YAAP,CAAoBC;AAAhC;AAHM,SAAf;AAFJ;AAQD;;AACD,SAAO,SAAQC,MAAR,CAAeR,KAAK,CAACF,QAArB,CAAP;AACD,CAhBH;AAmBA,iCACKX,KADL","sourcesContent":["import Axios from 'axios'\nimport router from '../router'\n\nimport login from './modules/login'\n\nif (window.sessionStorage.getItem('token')) {\n  Axios.defaults.headers.common['Authorization'] = window.sessionStorage.getItem('token')\n}\n\nexport let axiosInstance = Axios.create({\n  baseURL: 'http://localhost: 7001'\n})\n\n// response 拦截器\naxiosInstance.interceptors.response.use(\n  response => {\n    return response\n  },\n  error => {\n    if (error.response) {\n      switch (error.response.status) {\n        case 401:\n          router.replace({\n            path: 'login',\n            // 将跳转的路由path作为参数，登录成功后跳转到该路由\n            query: { redirect: router.currentRoute.fullPath }\n          })\n      }\n    }\n    return Promise.reject(error.response)\n  }\n)\n\nexport default {\n  ...login\n}"]}]}